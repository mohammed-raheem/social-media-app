{"version":3,"sources":["StateContext.jsx","components/Container.jsx","components/Page.jsx","DispatchContext.jsx","components/FlashMessages.jsx","components/HeaderLoggedOut.jsx","components/HeaderLoggedIn.jsx","components/Header.jsx","components/Footer.jsx","components/Search.jsx","components/HomeGuest.jsx","components/LoadingIcon.jsx","components/Home.jsx","components/About.jsx","components/Terms.jsx","components/SinglePost.jsx","components/EditPost.jsx","components/ProfilePosts.jsx","components/ProfileFollowers.jsx","components/ProfileFollowing.jsx","components/Profile.jsx","components/Chat.jsx","App.jsx","index.jsx","components/NotFound.jsx"],"names":["StateContext","createContext","Container","props","className","wide","children","Page","useEffect","document","title","window","scrollTo","DispatchContext","FlashMessages","flashMessagesArray","useContext","map","msg","index","type","text","HeaderLoggedOut","dispatch","useState","username","setUsername","password","setPassword","handleSubmit","e","a","preventDefault","Axios","post","response","data","message","console","log","onSubmit","name","placeholder","autoComplete","onChange","target","value","withRouter","appState","appDispatch","href","data-tip","data-for","onClick","place","id","unreadChatCount","to","user","src","avatar","alt","history","push","Header","loggedIn","Footer","date","Date","getFullYear","Search","nodeRef","useImmer","searchTerm","results","show","requestCount","state","setState","addEventListener","keyCode","removeEventListener","trim","draft","delay","setTimeout","clearTimeout","request","CancelToken","source","cancelToken","token","res","fetchResults","ref","htmlFor","autoFocus","Boolean","length","result","formattedDate","getDate","getMonth","_id","author","HomeContent","nodeRef1","useRef","nodeRef2","nodeRef3","useImmerReducer","action","hasErrors","test","noRequest","checkCount","isUnique","email","submitCount","CSSTransition","in","timeout","classNames","unmountOnExit","LoadingIcon","Home","isLoading","feed","ourRequest","fetchData","cancel","About","Terms","useParams","setIsLoading","setPost","get","fetchPost","createdDate","NotFound","handleDelete","confirm","delete","body","postId","initialState","isFetching","isSaving","sendCount","notFound","onBlur","disabled","ProfilePosts","posts","setPosts","fetchedPosts","ProfileFollowers","follower","ProfileFollowing","Profile","followActionLoading","startFollowingRequestCount","stopFollowingRequestCount","profileData","profileUsername","profileAvatar","isFollowing","counts","postCount","followerCount","followingCount","exact","path","socket","io","process","BACKENDURL","Chat","fieldValue","chatMessages","chatField","chatLog","isChatOpen","current","focus","on","scrollTop","scrollHeight","emit","CreatePost","React","lazy","defaults","baseURL","App","intialStates","localStorage","getItem","isSearchOpen","setItem","removeItem","Provider","fallback","HomeGuest","ReactDOM","render","StrictMode","getElementById"],"mappings":"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","file":"static/js/main.c98a3593.chunk.js","sourcesContent":["import { createContext } from \"react\";\n\nconst StateContext = createContext();\n\nexport default StateContext;\n","import React from \"react\";\n\nfunction Container(props) {\n  return (\n    <div className={`container ${!props.wide && \"container--narrow\"} py-md-5`}>\n      {props.children}\n    </div>\n  );\n}\n\nexport default Container;\n","import React, { useEffect } from \"react\";\n\nimport Container from \"./Container\";\n\nfunction Page(props) {\n  useEffect(() => {\n    document.title = props.title;\n    window.scrollTo(0, 0);\n  }, [props.title]);\n\n  return <Container wide={props.wide}>{props.children}</Container>;\n}\n\nexport default Page;\n","import { createContext } from \"react\";\n\nconst DispatchContext = createContext();\n\nexport default DispatchContext;\n","import React, { useContext } from \"react\";\n\nimport StateContext from \"../StateContext\";\n\nfunction FlashMessages() {\n  const { flashMessagesArray } = useContext(StateContext);\n\n  return (\n    <div className=\"floating-alerts\">\n      {flashMessagesArray.map((msg, index) => {\n        return (\n          <div\n            key={index}\n            className={`alert ${\n              msg.type === \"danger\" ? \"alert-danger\" : \"alert-success\"\n            } text-center floating-alert`}\n          >\n            {msg.text}\n          </div>\n        );\n      })}\n    </div>\n  );\n}\n\nexport default FlashMessages;\n","import React, { useState, useContext } from \"react\";\nimport Axios from \"axios\";\nimport DispatchContext from \"../DispatchContext\";\n\nfunction HeaderLoggedOut() {\n  const dispatch = useContext(DispatchContext);\n\n  const [username, setUsername] = useState();\n  const [password, setPassword] = useState();\n\n  const handleSubmit = async function (e) {\n    e.preventDefault();\n    try {\n      const response = await Axios.post(\"/login\", {\n        username,\n        password,\n      });\n      if (response.data) {\n        dispatch({ type: \"login\", data: response.data });\n        dispatch({\n          type: \"flashMessage\",\n          message: { type: \"success\", text: \"Welcome back to your account.\" },\n        });\n      } else {\n        dispatch({\n          type: \"flashMessage\",\n          message: { type: \"danger\", text: \"Invalid username or passowrd!\" },\n        });\n      }\n    } catch (e) {\n      console.log(\"catched an error\");\n    }\n  };\n\n  return (\n    <form onSubmit={handleSubmit} className=\"mb-0 pt-2 pt-md-0\">\n      <div className=\"row align-items-center\">\n        <div className=\"col-md mr-0 pr-md-0 mb-3 mb-md-0\">\n          <input\n            name=\"username\"\n            className=\"form-control form-control-sm input-dark\"\n            type=\"text\"\n            placeholder=\"Username\"\n            autoComplete=\"off\"\n            onChange={(e) => setUsername(e.target.value)}\n          />\n        </div>\n        <div className=\"col-md mr-0 pr-md-0 mb-3 mb-md-0\">\n          <input\n            name=\"password\"\n            className=\"form-control form-control-sm input-dark\"\n            type=\"password\"\n            placeholder=\"Password\"\n            onChange={(e) => setPassword(e.target.value)}\n          />\n        </div>\n        <div className=\"col-md-auto\">\n          <button className=\"btn btn-success btn-sm\">Sign In</button>\n        </div>\n      </div>\n    </form>\n  );\n}\n\nexport default HeaderLoggedOut;\n","import React, { useContext } from \"react\";\nimport { Link, withRouter } from \"react-router-dom\";\nimport ReactTooltip from \"react-tooltip\";\n\nimport StateContext from \"../StateContext\";\nimport DispatchContext from \"../DispatchContext\";\n\nfunction HeaderLoggedIn(props) {\n  const appState = useContext(StateContext);\n  const appDispatch = useContext(DispatchContext);\n\n  const handleLoggingOut = function () {\n    props.history.push(\"/\");\n    appDispatch({ type: \"logout\" });\n  };\n\n  const handleSearch = (e) => {\n    e.preventDefault();\n    appDispatch({ type: \"openSearch\" });\n  };\n  return (\n    <div className=\"flex-row my-3 my-md-0\">\n      <a\n        href=\"#\"\n        data-tip=\"Search\"\n        data-for=\"search\"\n        className=\"text-white mr-3 header-search-icon\"\n        onClick={handleSearch}\n      >\n        <i className=\"fas fa-search\"></i>\n      </a>\n      <ReactTooltip place=\"bottom\" id=\"search\" className=\"custom-tooltip\" />\n      <span\n        data-tip=\"Chat\"\n        data-for=\"chat\"\n        className={`mr-3 header-chat-icon ${\n          appState.unreadChatCount ? \"text-danger\" : \"text-white\"\n        }`}\n        onClick={() => appDispatch({ type: \"toggleChat\" })}\n      >\n        <i className=\"fas fa-comment\"></i>\n        {appState.unreadChatCount ? (\n          <span className=\"chat-count-badge text-white\">\n            {appState.unreadChatCount > 9 ? \"9+\" : appState.unreadChatCount}\n          </span>\n        ) : (\n          \"\"\n        )}\n      </span>\n      <ReactTooltip place=\"bottom\" id=\"chat\" className=\"custom-tooltip\" />\n      <Link\n        to={`/profile/${appState.user.username}`}\n        data-tip=\"My profile\"\n        data-for=\"profile\"\n        className=\"mr-3\"\n      >\n        <img\n          className=\"small-header-avatar\"\n          src={appState.user.avatar}\n          alt=\"\"\n        />\n      </Link>\n      <ReactTooltip place=\"bottom\" id=\"profile\" className=\"custom-tooltip\" />\n      <Link className=\"btn btn-sm btn-success mr-2\" to=\"/create-post\">\n        Create Post\n      </Link>\n      <button onClick={handleLoggingOut} className=\"btn btn-sm btn-secondary\">\n        Sign Out\n      </button>\n    </div>\n  );\n}\n\nexport default withRouter(HeaderLoggedIn);\n","import React, { useContext } from \"react\";\nimport { Link } from \"react-router-dom\";\n\nimport StateContext from \"../StateContext\";\n\nimport HeaderLoggedOut from \"./HeaderLoggedOut\";\nimport HeaderLoggedIn from \"./HeaderLoggedIn\";\n\nconst Header = function () {\n  const { loggedIn } = useContext(StateContext);\n\n  return (\n    <header className=\"header-bar bg-primary mb-3\">\n      <div className=\"container d-flex flex-column flex-md-row align-items-center p-3\">\n        <h4 className=\"my-0 mr-md-auto font-weight-normal\">\n          <Link to=\"/\" className=\"text-white\">\n            ComplexApp\n          </Link>\n        </h4>\n        {loggedIn ? <HeaderLoggedIn /> : <HeaderLoggedOut />}\n      </div>\n    </header>\n  );\n};\n\nexport default Header;\n","import React from \"react\";\nimport { Link } from \"react-router-dom\";\n\nconst Footer = function () {\n  const date = new Date();\n\n  return (\n    <footer className=\"border-top text-center small text-muted py-3\">\n      <p>\n        <Link to=\"/\" className=\"mx-1\">\n          Home\n        </Link>{\" \"}\n        |{\" \"}\n        <Link className=\"mx-1\" to=\"/about-us\">\n          About Us\n        </Link>{\" \"}\n        |{\" \"}\n        <Link className=\"mx-1\" to=\"/terms\">\n          Terms\n        </Link>\n      </p>\n      <p className=\"m-0\">\n        Copyright &copy; {date.getFullYear()}{\" \"}\n        <Link to=\"/\" className=\"text-muted\">\n          ComplexApp\n        </Link>\n        . All rights reserved.\n      </p>\n    </footer>\n  );\n};\n\nexport default Footer;\n","import React, { useContext, useEffect } from \"react\";\nimport Axios from \"axios\";\nimport { useImmer } from \"use-immer\";\nimport DispatchContext from \"../DispatchContext\";\nimport { Link } from \"react-router-dom\";\n\nfunction Search({ nodeRef }) {\n  const appDispatch = useContext(DispatchContext);\n\n  const [state, setState] = useImmer({\n    searchTerm: \"\",\n    results: [],\n    show: \"neither\",\n    requestCount: 0,\n  });\n\n  useEffect(() => {\n    window.addEventListener(\"keyup\", (e) => {\n      if (e.keyCode === 27) appDispatch({ type: \"closeSearch\" });\n    });\n    return () =>\n      window.removeEventListener(\"keyup\", (e) => {\n        if (e.keyCode === 27) appDispatch({ type: \"closeSearch\" });\n      });\n  }, []);\n\n  const handleInput = (e) => {\n    const value = e.target.value;\n    setState((draft) => {\n      draft.searchTerm = value;\n    });\n  };\n\n  useEffect(() => {\n    if (state.searchTerm.trim()) {\n      setState((draft) => {\n        draft.show = \"loading\";\n      });\n      const delay = setTimeout(() => {\n        setState((draft) => {\n          draft.requestCount++;\n        });\n      }, 700);\n\n      return () => clearTimeout(delay);\n    } else {\n      setState((draft) => {\n        draft.show = \"neither\";\n      });\n    }\n  }, [state.searchTerm]);\n\n  useEffect(() => {\n    if (state.requestCount) {\n      const request = Axios.CancelToken.source();\n      const fetchResults = async () => {\n        try {\n          const res = await Axios.post(\n            \"/search\",\n            { searchTerm: state.searchTerm },\n            { cancelToken: request.token }\n          );\n          setState((draft) => {\n            draft.results = res.data;\n            draft.show = \"results\";\n          });\n        } catch (e) {\n          console.log(\"Catched an error at search file\");\n        }\n      };\n      fetchResults();\n    }\n  }, [state.requestCount]);\n\n  return (\n    <div ref={nodeRef} className=\"search-overlay\">\n      <div className=\"search-overlay-top shadow-sm\">\n        <div className=\"container container--narrow\">\n          <label htmlFor=\"live-search-field\" className=\"search-overlay-icon\">\n            <i className=\"fas fa-search\"></i>\n          </label>\n          <input\n            autoFocus\n            type=\"text\"\n            autoComplete=\"off\"\n            id=\"live-search-field\"\n            className=\"live-search-field\"\n            placeholder=\"What are you interested in?\"\n            onChange={handleInput}\n          />\n          <span\n            onClick={() => appDispatch({ type: \"closeSearch\" })}\n            className=\"close-live-search\"\n          >\n            <i className=\"fas fa-times-circle\"></i>\n          </span>\n        </div>\n      </div>\n\n      <div className=\"search-overlay-bottom\">\n        <div className=\"container container--narrow py-3\">\n          <div\n            className={\n              \"circle-loader \" +\n              (state.show === \"loading\" ? \"circle-loader--visible\" : \"\")\n            }\n          ></div>\n          <div\n            className={\n              \"live-search-results \" +\n              (state.show === \"results\" ? \"live-search-results--visible\" : \"\")\n            }\n          >\n            {Boolean(state.results.length) && (\n              <div className=\"list-group shadow-sm\">\n                <div className=\"list-group-item active\">\n                  <strong>Search Results</strong> ({state.results.length}{\" \"}\n                  {state.results.length > 1 ? \"items \" : \"item \"}\n                  found)\n                </div>\n                {state.results.map((result) => {\n                  const date = new Date();\n                  const formattedDate = `${date.getDate()}/${date.getMonth()}/${date.getFullYear()}`;\n\n                  return (\n                    <Link\n                      to={`/post/${result._id}`}\n                      key={result._id}\n                      className=\"list-group-item list-group-item-action\"\n                      onClick={() => appDispatch({ type: \"closeSearch\" })}\n                    >\n                      <img\n                        className=\"avatar-tiny\"\n                        src={result.author.avatar}\n                        alt=\"\"\n                      />{\" \"}\n                      <strong>{result.title} </strong>\n                      <span className=\"text-muted small\">\n                        by brad on {formattedDate}{\" \"}\n                      </span>\n                    </Link>\n                  );\n                })}\n              </div>\n            )}\n            {!Boolean(state.results.length) && (\n              <p className=\"alert alert-danger text-center shadow-sm\">\n                Sorry, there's no results have been found for this search!\n              </p>\n            )}\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n}\n\nexport default Search;\n","import React, { useContext, useEffect, useRef } from \"react\";\nimport Axios from \"axios\";\nimport { useImmerReducer } from \"use-immer\";\nimport { CSSTransition } from \"react-transition-group\";\nimport DispatchContext from \"../DispatchContext\";\n\nimport Page from \"./Page\";\n\nconst HomeContent = function () {\n  const nodeRef1 = useRef(null);\n  const nodeRef2 = useRef(null);\n  const nodeRef3 = useRef(null);\n\n  const appDispatch = useContext(DispatchContext);\n\n  const initialState = {\n    username: {\n      value: \"\",\n      hasErrors: false,\n      message: \"\",\n      isUnique: false,\n      checkCount: 0,\n    },\n    email: {\n      value: \"\",\n      hasErrors: false,\n      message: \"\",\n      isUnique: false,\n      checkCount: 0,\n    },\n    password: {\n      value: \"\",\n      hasErrors: false,\n      message: \"\",\n    },\n    submitCount: 0,\n  };\n\n  const reducer = (draft, action) => {\n    switch (action.type) {\n      case \"usernameImmediately\":\n        draft.username.hasErrors = false;\n        draft.username.value = action.value;\n        if (draft.username.value.length > 30) {\n          draft.username.hasErrors = true;\n          draft.username.message = \"Username can not exceed 30 characters.\";\n        }\n        if (\n          draft.username.value &&\n          !/^([a-zA-Z0-9]+)$/.test(draft.username.value)\n        ) {\n          draft.username.hasErrors = true;\n          draft.username.message =\n            \"Username can only conatin letters and numbers .\";\n        }\n        break;\n      case \"usernameAfterDelay\":\n        if (draft.username.value.length < 3) {\n          draft.username.hasErrors = true;\n          draft.username.message = \"Username must be at least 3 characters.\";\n        }\n        if (!draft.username.hasErrors && !action.noRequest) {\n          draft.username.checkCount++;\n        }\n        break;\n      case \"usernameUniqueResults\":\n        if (action.value) {\n          draft.username.hasErrors = true;\n          draft.username.isUnique = false;\n          draft.username.message = \"Username is already taken.\";\n        } else {\n          draft.username.isUnique = true;\n        }\n        break;\n      case \"emailImmediately\":\n        draft.email.hasErrors = false;\n        draft.email.value = action.value;\n        break;\n      case \"emailAfterDelay\":\n        if (!/^\\S+@\\S+$/.test(draft.email.value)) {\n          draft.email.hasErrors = true;\n          draft.email.message = \"You must provide a valid email address\";\n        }\n        if (!draft.email.hasErrors && !action.noRequest) {\n          draft.email.checkCount++;\n        }\n        break;\n      case \"emailUniqueResults\":\n        if (action.value) {\n          draft.email.hasErrors = true;\n          draft.email.isUnique = false;\n          draft.email.message = \"This email is already taken.\";\n        } else {\n          draft.email.isUnique = true;\n        }\n        break;\n      case \"passwordImmediately\":\n        draft.password.hasErrors = false;\n        draft.password.value = action.value;\n        if (draft.password.value.length > 50) {\n          draft.password.hasErrors = true;\n          draft.password.message = \"Password can not exceed 50 characters.\";\n        }\n        break;\n      case \"passwordAfterDelay\":\n        if (draft.password.value.length < 12) {\n          draft.password.hasErrors = true;\n          draft.password.message = \"Password must be at least 12 characters.\";\n        }\n        break;\n      case \"submitForm\":\n        if (\n          !draft.username.hasErrors &&\n          draft.username.isUnique &&\n          !draft.email.hasErrors &&\n          draft.email.isUnique &&\n          !draft.password.hasErrors\n        ) {\n          draft.submitCount++;\n        }\n        break;\n\n      default:\n        break;\n    }\n  };\n\n  const [state, dispatch] = useImmerReducer(reducer, initialState);\n\n  useEffect(() => {\n    if (state.username.value) {\n      const delay = setTimeout(\n        () => dispatch({ type: \"usernameAfterDelay\" }),\n        800\n      );\n\n      return () => clearTimeout(delay);\n    }\n  }, [state.username.value]);\n\n  useEffect(() => {\n    if (state.email.value) {\n      const delay = setTimeout(\n        () => dispatch({ type: \"emailAfterDelay\" }),\n        800\n      );\n\n      return () => clearTimeout(delay);\n    }\n  }, [state.email.value]);\n\n  useEffect(() => {\n    if (state.password.value) {\n      const delay = setTimeout(\n        () => dispatch({ type: \"passwordAfterDelay\" }),\n        800\n      );\n\n      return () => clearTimeout(delay);\n    }\n  }, [state.password.value]);\n\n  useEffect(() => {\n    if (state.username.checkCount) {\n      const request = Axios.CancelToken.source();\n      const fetchResults = async () => {\n        try {\n          const res = await Axios.post(\n            \"/doesUsernameExist\",\n            { username: state.username.value },\n            { cancelToken: request.token }\n          );\n          dispatch({ type: \"usernameUniqueResults\", value: res.data });\n        } catch (e) {\n          console.log(\"Catched an error at search file\");\n        }\n      };\n      fetchResults();\n    }\n  }, [state.username.checkCount]);\n\n  useEffect(() => {\n    if (state.email.checkCount) {\n      const request = Axios.CancelToken.source();\n      const fetchResults = async () => {\n        try {\n          const res = await Axios.post(\n            \"/doesEmailExist\",\n            { email: state.email.value },\n            { cancelToken: request.token }\n          );\n          dispatch({ type: \"emailUniqueResults\", value: res.data });\n        } catch (e) {\n          console.log(\"Catched an error at search file\");\n        }\n      };\n      fetchResults();\n    }\n  }, [state.email.checkCount]);\n\n  useEffect(() => {\n    if (state.submitCount) {\n      const request = Axios.CancelToken.source();\n      const fetchResults = async () => {\n        try {\n          const res = await Axios.post(\n            \"/register\",\n            {\n              username: state.username.value,\n              email: state.email.value,\n              password: state.password.value,\n            },\n            { cancelToken: request.token }\n          );\n          appDispatch({ type: \"login\", data: res.data });\n          appDispatch({\n            type: \"flashMessage\",\n            message: { type: \"success\", text: \"Welcome to your account.\" },\n          });\n        } catch (e) {\n          console.log(\"Catched an error at search file\");\n        }\n      };\n      fetchResults();\n    }\n  }, [state.submitCount]);\n\n  const handleSubmit = function (e) {\n    e.preventDefault();\n\n    dispatch({ type: \"usernameImmediately\", value: state.username.value });\n    dispatch({\n      type: \"usernameAfterDelay\",\n      value: state.username.value,\n      noRequest: true,\n    });\n\n    dispatch({ type: \"emailImmediately\", value: state.email.value });\n    dispatch({\n      type: \"emailAfterDelay\",\n      value: state.email.value,\n      noRequest: true,\n    });\n\n    dispatch({ type: \"passwordImmediately\", value: state.password.value });\n    dispatch({ type: \"passwordAfterDelay\", value: state.password.value });\n\n    dispatch({ type: \"submitForm\" });\n  };\n\n  return (\n    <Page title=\"Social Media App\" wide={true}>\n      <div className=\"row align-items-center\">\n        <div className=\"col-lg-7 py-3 py-md-5\">\n          <h1 className=\"display-3\">Remember Writing?</h1>\n          <p className=\"lead text-muted\">\n            Are you sick of short tweets and impersonal &ldquo;shared&rdquo;\n            posts that are reminiscent of the late 90&rsquo;s email forwards? We\n            believe getting back to actually writing is the key to enjoying the\n            internet again.\n          </p>\n        </div>\n        <div className=\"col-lg-5 pl-lg-5 pb-3 py-lg-5\">\n          <form onSubmit={handleSubmit}>\n            <div className=\"form-group\">\n              <label htmlFor=\"username-register\" className=\"text-muted mb-1\">\n                <small>Username</small>\n              </label>\n              <input\n                id=\"username-register\"\n                name=\"username\"\n                className=\"form-control\"\n                type=\"text\"\n                placeholder=\"Pick a username\"\n                autoComplete=\"off\"\n                onChange={(e) =>\n                  dispatch({\n                    type: \"usernameImmediately\",\n                    value: e.target.value,\n                  })\n                }\n              />\n              <CSSTransition\n                in={state.username.hasErrors}\n                timeout={330}\n                classNames=\"liveValidateMessage\"\n                nodeRef={nodeRef1}\n                unmountOnExit\n              >\n                <div\n                  ref={nodeRef1}\n                  className=\"alert alert-danger small liveValidateMessage\"\n                >\n                  {state.username.message}\n                </div>\n              </CSSTransition>\n            </div>\n            <div className=\"form-group\">\n              <label htmlFor=\"email-register\" className=\"text-muted mb-1\">\n                <small>Email</small>\n              </label>\n              <input\n                id=\"email-register\"\n                name=\"email\"\n                className=\"form-control\"\n                type=\"text\"\n                placeholder=\"you@example.com\"\n                autoComplete=\"off\"\n                onChange={(e) =>\n                  dispatch({ type: \"emailImmediately\", value: e.target.value })\n                }\n              />\n              <CSSTransition\n                in={state.email.hasErrors}\n                timeout={330}\n                classNames=\"liveValidateMessage\"\n                nodeRef={nodeRef2}\n                unmountOnExit\n              >\n                <div\n                  ref={nodeRef2}\n                  className=\"alert alert-danger small liveValidateMessage\"\n                >\n                  {state.email.message}\n                </div>\n              </CSSTransition>\n            </div>\n            <div className=\"form-group\">\n              <label htmlFor=\"password-register\" className=\"text-muted mb-1\">\n                <small>Password</small>\n              </label>\n              <input\n                id=\"password-register\"\n                name=\"password\"\n                className=\"form-control\"\n                type=\"password\"\n                placeholder=\"Create a password\"\n                onChange={(e) =>\n                  dispatch({\n                    type: \"passwordImmediately\",\n                    value: e.target.value,\n                  })\n                }\n              />\n              <CSSTransition\n                in={state.password.hasErrors}\n                timeout={330}\n                classNames=\"liveValidateMessage\"\n                nodeRef={nodeRef3}\n                unmountOnExit\n              >\n                <div\n                  ref={nodeRef3}\n                  className=\"alert alert-danger small liveValidateMessage\"\n                >\n                  {state.password.message}\n                </div>\n              </CSSTransition>\n            </div>\n            <button\n              type=\"submit\"\n              className=\"py-3 mt-4 btn btn-lg btn-success btn-block\"\n            >\n              Sign up for ComplexApp\n            </button>\n          </form>\n        </div>\n      </div>\n    </Page>\n  );\n};\n\nexport default HomeContent;\n","import React from \"react\";\n\nfunction LoadingIcon() {\n  return (\n    <div className=\"dots-loading\">\n      <div></div>\n    </div>\n  );\n}\n\nexport default LoadingIcon;\n","import React, { useContext, useEffect } from \"react\";\nimport {useImmer} from 'use-immer'\nimport Axios from \"axios\"\nimport {Link} from \"react-router-dom\"\n\nimport StateContext from \"../StateContext\";\nimport Page from \"./Page\";\nimport LoadingIcon from \"./LoadingIcon\";\n\nfunction Home() {\n  const { user } = useContext(StateContext);\n  \n  const [state, setState] = useImmer({\n    isLoading: true,\n    feed: [],\n  })\n\n  useEffect(() => {\n    const ourRequest = Axios.CancelToken.source();\n\n    async function fetchData() {\n      try {\n        const response = await Axios.post('/getHomeFeed',\n          { token: user.token },\n          { cancelToken: ourRequest.token }\n        );\n        setState((draft) => {\n          draft.isLoading = false\n          draft.feed = response.data;\n        });\n      } catch (e) {\n        console.log(e.response.data);\n      }\n    }\n    fetchData();\n    return () => {\n      ourRequest.cancel();\n    };\n  }, []);\n\n  if (state.isLoading) {\n    return <LoadingIcon />\n  }\n\n  return (\n    <Page title=\"Home\">\n    {state.feed.length > 0 && (\n      <>\n        <h2 className=\"text-center mb-4\">Latest post from your community</h2>\n        <div className=\"list-group\">\n          {state.feed.map((result) => {\n                  const date = new Date();\n                  const formattedDate = `${date.getDate()}/${date.getMonth()}/${date.getFullYear()}`;\n\n                  return (\n                    <Link\n                      to={`/post/${result._id}`}\n                      key={result._id}\n                      className=\"list-group-item list-group-item-action\"\n                    >\n                      <img\n                        className=\"avatar-tiny\"\n                        src={result.author.avatar}\n                        alt=\"\"\n                      />{\" \"}\n                      <strong>{result.title} </strong>\n                      <span className=\"text-muted small\">\n                        by brad on {formattedDate}{\" \"}\n                      </span>\n                    </Link>\n                  );\n                })}\n        </div>\n      </>\n    )}\n      {state.feed.length === 0 && (\n        <>\n          <div className=\"container container--narrow py-md-5\">\n        <h2 className=\"text-center\">\n          Hello <strong>{user.username}</strong>, your feed is empty.\n        </h2>\n        <p className=\"lead text-muted text-center\">\n          Your feed displays the latest posts from the people you follow. If you\n          don&rsquo;t have any friends to follow that&rsquo;s okay; you can use\n          the &ldquo;Search&rdquo; feature in the top menu bar to find content\n          written by people with similar interests and then follow them.\n        </p>\n      </div>\n        </>\n      )}\n    </Page>\n  );\n}\n\nexport default Home;\n","import React from \"react\";\n\nimport Page from \"./Page\";\n\nconst About = function () {\n  return (\n    <Page title=\"About us\">\n      <h2>About Us</h2>\n      <p className=\"lead text-muted\">\n        Lorem ipsum dolor sit amet consectetur adipisicing elit. Corporis\n        dolorum labore quisquam vel id dicta fuga! Ducimus, quo. Dolore commodi\n        aliquid error veritatis consequuntur, excepturi cumque fuga eum incidunt\n        doloremque?\n      </p>\n      <p>\n        Lorem ipsum, dolor sit amet consectetur adipisicing elit. At qui enim\n        rem totam voluptatum. Aut saepe temporibus, facilis ex a iste expedita\n        minima dolorum dicta doloribus libero aliquid, quae maxime? Lorem ipsum\n        dolor sit amet consectetur adipisicing elit. Fugiat suscipit beatae eum,\n        est soluta ducimus ratione et impedit sapiente, nihil, atque dignissimos\n        adipisci? Totam atque officia quis voluptates sed veniam?\n      </p>\n      <p>\n        Lorem, ipsum dolor sit amet consectetur adipisicing elit. Expedita\n        voluptates quisquam possimus tenetur, dicta enim rerum quis, quaerat id\n        nobis provident quo dolorum sapiente temporibus facere non repellendus\n        consequatur cupiditate!\n      </p>\n    </Page>\n  );\n};\n\nexport default About;\n","import React from \"react\";\n\nimport Page from \"./Page\";\n\nconst Terms = function () {\n  return (\n    <Page title=\"Our Terms\">\n      <h2>Our Terms &amp; Conditions</h2>\n      <p className=\"lead text-muted\">\n        Lorem ipsum dolor sit amet consectetur adipisicing elit. Corporis\n        dolorum labore quisquam vel id dicta fuga! Ducimus, quo. Dolore commodi\n        aliquid error veritatis consequuntur, excepturi cumque fuga eum incidunt\n        doloremque?\n      </p>\n      <p>\n        Lorem ipsum, dolor sit amet consectetur adipisicing elit. At qui enim\n        rem totam voluptatum. Aut saepe temporibus, facilis ex a iste expedita\n        minima dolorum dicta doloribus libero aliquid, quae maxime? Lorem ipsum\n        dolor sit amet consectetur adipisicing elit. Fugiat suscipit beatae eum,\n        est soluta ducimus ratione et impedit sapiente, nihil, atque dignissimos\n        adipisci? Totam atque officia quis voluptates sed veniam?\n      </p>\n      <p>\n        Lorem, ipsum dolor sit amet consectetur adipisicing elit. Expedita\n        voluptates quisquam possimus tenetur, dicta enim rerum quis, quaerat id\n        nobis provident quo dolorum sapiente temporibus facere non repellendus\n        consequatur cupiditate!\n      </p>\n      <h3>Details</h3>\n      <p>\n        Lorem ipsum dolor sit amet consectetur adipisicing elit. Quae laboriosam\n        distinctio atque sint earum? Temporibus, voluptas aspernatur aliquam\n        nisi sed harum laborum, nemo odio animi officia quisquam. Veniam, natus\n        reprehenderit.\n      </p>\n    </Page>\n  );\n};\n\nexport default Terms;\n","import React, { useContext, useEffect, useState } from \"react\";\nimport Axios from \"axios\";\nimport { useParams, Link, withRouter } from \"react-router-dom\";\nimport ReactMarkDown from \"react-markdown\";\nimport ReactToolTip from \"react-tooltip\";\n\nimport StateContext from \"../StateContext\";\nimport DispatchContext from \"../DispatchContext\";\n\nimport Page from \"./Page\";\nimport LoadingIcon from \"./LoadingIcon\";\nimport NotFound from \"./NotFound\";\n\nfunction SinglePost(props) {\n  const appState = useContext(StateContext);\n  const appDispatch = useContext(DispatchContext);\n\n  const { id } = useParams();\n  const [isLoading, setIsLoading] = useState(true);\n  const [post, setPost] = useState([]);\n\n  useEffect(() => {\n    const request = Axios.CancelToken.source();\n\n    const fetchPost = async function () {\n      try {\n        const response = await Axios.get(`/post/${id}`, {\n          cancelToken: request.token,\n        });\n        setPost(response.data);\n        setIsLoading(false);\n      } catch (e) {\n        console.log(\"Catched an error or the request cancelled\");\n      }\n    };\n\n    fetchPost();\n\n    return () => {\n      request.cancel();\n    };\n  }, [id]);\n\n  const date = new Date(post.createdDate);\n  const formattedDate = `${date.getDate()}/${date.getMonth()}/${date.getFullYear()}`;\n\n  if (isLoading)\n    return (\n      <Page title=\"...\">\n        <LoadingIcon />\n      </Page>\n    );\n\n  if (!isLoading && !post) return <NotFound />;\n\n  const isOwner = () => {\n    if (appState.user.username === post.author.username) {\n      return true;\n    } else {\n      return false;\n    }\n  };\n\n  const handleDelete = async () => {\n    const deleteConfirm = window.confirm(\"Do you want to delete this post?\");\n    if (deleteConfirm) {\n      try {\n        const response = await Axios.delete(`/post/${id}`, {\n          data: { token: appState.user.token },\n        });\n\n        if (response.data === \"Success\") {\n          appDispatch({\n            type: \"flashMessage\",\n            message: { type: \"success\", text: \"Post deleted successfully.\" },\n          });\n          props.history.push(`/profile/${appState.user.username}`);\n        }\n      } catch (e) {\n        console.log(\"Catched an error while trying to delete this post!\");\n      }\n    }\n  };\n\n  return (\n    <Page title={post.title}>\n      <div className=\"d-flex justify-content-between\">\n        <h2>{post.title}</h2>\n        {isOwner() && (\n          <span className=\"pt-2\">\n            <Link\n              to={`/post/${post._id}/edit`}\n              data-tip=\"Edit\"\n              data-for=\"edit\"\n              className=\"text-primary mr-2\"\n            >\n              <i className=\"fas fa-edit\"></i>\n            </Link>\n            <ReactToolTip id=\"edit\" />{\" \"}\n            <button\n              data-tip=\"Delete\"\n              data-for=\"delete\"\n              className=\"delete-post-button text-danger\"\n              onClick={handleDelete}\n            >\n              <i className=\"fas fa-trash\"></i>\n            </button>\n            <ReactToolTip id=\"delete\" />\n          </span>\n        )}\n      </div>\n\n      <p className=\"text-muted small mb-4\">\n        <Link to={`/profile/${post.author.username}`}>\n          <img className=\"avatar-tiny\" src={post.author.avatar} alt=\"\" />\n        </Link>\n        Posted by{\" \"}\n        <Link to={`/profile/${post.author.username}`}>\n          {post.author.username}\n        </Link>{\" \"}\n        on {formattedDate}\n      </p>\n\n      <div className=\"body-content\">\n        <ReactMarkDown children={post.body} />\n      </div>\n    </Page>\n  );\n}\n\nexport default withRouter(SinglePost);\n","import React, { useContext, useEffect } from \"react\";\nimport { useImmerReducer } from \"use-immer\";\nimport Axios from \"axios\";\nimport { useParams, Link, withRouter } from \"react-router-dom\";\n\nimport StateContext from \"../StateContext\";\nimport DispatchContext from \"../DispatchContext\";\n\nimport Page from \"./Page\";\nimport LoadingIcon from \"./LoadingIcon\";\nimport NotFound from \"./NotFound\";\n\nfunction EditPost(props) {\n  const appState = useContext(StateContext);\n  const appDispatch = useContext(DispatchContext);\n\n  const postId = useParams().id;\n\n  const initialState = {\n    title: {\n      value: \"\",\n      hasErrors: false,\n      message: \"\",\n    },\n    body: {\n      value: \"\",\n      hasErrors: false,\n      message: \"\",\n    },\n    isFetching: true,\n    isSaving: false,\n    id: postId,\n    sendCount: 0,\n    notFound: false,\n  };\n  const ourReducer = function (draft, action) {\n    switch (action.type) {\n      case \"fetchComplete\":\n        draft.title.value = action.value.title;\n        draft.body.value = action.value.body;\n        draft.isFetching = false;\n        break;\n      case \"titleChange\":\n        draft.title.hasErrors = false;\n        draft.title.value = action.value;\n        break;\n      case \"bodyChange\":\n        draft.body.hasErrors = false;\n        draft.body.value = action.value;\n        break;\n      case \"submitRequest\":\n        if (!draft.title.hasErrors && !draft.body.hasErrors) {\n          draft.sendCount++;\n        }\n        break;\n      case \"saveRequestStarted\":\n        draft.isSaving = true;\n        break;\n      case \"saveRequestFinished\":\n        draft.isSaving = false;\n        props.history.push(`/post/${postId}`);\n        break;\n      case \"titleRules\":\n        if (!action.value.trim()) {\n          draft.title.hasErrors = true;\n          draft.title.message = \"This field should not be empty!\";\n        } else {\n          draft.title.hasErrors = false;\n          draft.title.message = \"\";\n        }\n        break;\n      case \"bodyRules\":\n        if (!action.value.trim()) {\n          draft.body.hasErrors = true;\n          draft.body.message = \"This field should not be empty!\";\n        } else {\n          draft.body.hasErrors = false;\n          draft.body.message = \"\";\n        }\n        break;\n      case \"notFound\":\n        draft.notFound = true;\n        break;\n\n      default:\n        return draft;\n    }\n  };\n  const [state, dispatch] = useImmerReducer(ourReducer, initialState);\n\n  const handleSubmit = function (e) {\n    e.preventDefault();\n    dispatch({ type: \"titleRules\", value: state.title.value });\n    dispatch({ type: \"bodyRules\", value: state.body.value });\n    dispatch({ type: \"submitRequest\" });\n  };\n\n  useEffect(() => {\n    if (state.sendCount) {\n      dispatch({ type: \"saveRequestStarted\" });\n      const request = Axios.CancelToken.source();\n      const fetchPost = async function () {\n        try {\n          const response = await Axios.post(\n            `/post/${state.id}/edit`,\n            {\n              title: state.title.value,\n              body: state.body.value,\n              token: appState.user.token,\n            },\n            {\n              cancelToken: request.token,\n            }\n          );\n          dispatch({ type: \"saveRequestFinished\" });\n          appDispatch({\n            type: \"flashMessage\",\n            message: { type: \"success\", text: \"The post has updated!\" },\n          });\n        } catch (e) {\n          console.log(\"Catched an error or the request cancelled\");\n        }\n      };\n\n      fetchPost();\n\n      return () => {\n        request.cancel();\n      };\n    }\n  }, [state.sendCount]);\n\n  useEffect(() => {\n    const request = Axios.CancelToken.source();\n\n    const fetchPost = async function () {\n      try {\n        const response = await Axios.get(`/post/${state.id}`, {\n          cancelToken: request.token,\n        });\n        if (response.data) {\n          if (appState.user.username === response.data.author.username) {\n            dispatch({ type: \"fetchComplete\", value: response.data });\n          } else {\n            appDispatch({\n              type: \"flashMessage\",\n              message: {\n                type: \"danger\",\n                text: \"You do not have permission to edit that post!\",\n              },\n            });\n            props.history.push(\"/\");\n          }\n        } else {\n          dispatch({ type: \"notFound\" });\n        }\n      } catch (e) {\n        console.log(\"Catched an error or the request cancelled\");\n      }\n    };\n\n    fetchPost();\n\n    return () => {\n      request.cancel();\n    };\n  }, [dispatch, state.id]);\n\n  if (state.notFound) return <NotFound />;\n\n  if (state.isFetching)\n    return (\n      <Page title=\"...\">\n        <LoadingIcon />\n      </Page>\n    );\n\n  return (\n    <Page title=\"Create Post\">\n      <Link className=\"small font-weight-bold\" to={`/post/${state.id}`}>\n        &laquo; Back to the post\n      </Link>\n      <form className=\"mt-3\" onSubmit={handleSubmit}>\n        <div className=\"form-group\">\n          <label htmlFor=\"post-title\" className=\"text-muted mb-1\">\n            <small>Title</small>\n          </label>\n          <input\n            autoFocus\n            name=\"title\"\n            id=\"post-title\"\n            className=\"form-control form-control-lg form-control-title\"\n            type=\"text\"\n            placeholder=\"\"\n            autoComplete=\"off\"\n            value={state.title.value}\n            onChange={(e) =>\n              dispatch({ type: \"titleChange\", value: e.target.value })\n            }\n            onBlur={(e) =>\n              dispatch({ type: \"titleRules\", value: e.target.value })\n            }\n          />\n          {state.title.hasErrors && (\n            <div className=\"alert alert-danger small liveValidateMessage\">\n              {state.title.message}\n            </div>\n          )}\n        </div>\n\n        <div className=\"form-group\">\n          <label htmlFor=\"post-body\" className=\"text-muted mb-1 d-block\">\n            <small>Body Content</small>\n          </label>\n          <textarea\n            name=\"body\"\n            id=\"post-body\"\n            className=\"body-content tall-textarea form-control\"\n            type=\"text\"\n            value={state.body.value}\n            onChange={(e) =>\n              dispatch({ type: \"bodyChange\", value: e.target.value })\n            }\n            onBlur={(e) =>\n              dispatch({ type: \"bodyRules\", value: e.target.value })\n            }\n          />\n          {state.body.hasErrors && (\n            <div className=\"alert alert-danger small liveValidateMessage\">\n              {state.body.message}\n            </div>\n          )}\n        </div>\n\n        <button className=\"btn btn-primary\" disabled={state.isSaving}>\n          Save Updates\n        </button>\n      </form>\n    </Page>\n  );\n}\n\nexport default withRouter(EditPost);\n","import React, { useEffect, useState } from \"react\";\nimport Axios from \"axios\";\nimport { useParams, Link } from \"react-router-dom\";\n\nimport LoadingIcon from \"./LoadingIcon\";\n\nfunction ProfilePosts() {\n  const [isLoading, setIsLoading] = useState(true);\n  const [posts, setPosts] = useState([]);\n\n  const { username } = useParams();\n\n  useEffect(() => {\n    const request = Axios.CancelToken.source();\n\n    const fetchedPosts = async function () {\n      try {\n        const response = await Axios.get(`/profile/${username}/posts`, {\n          cancelToken: request.token,\n        });\n        setPosts(response.data);\n        setIsLoading(false);\n      } catch (e) {\n        console.log(\"catched an error in profile posts\");\n      }\n    };\n    fetchedPosts();\n\n    return () => {\n      request.cancel();\n    };\n  }, [username]);\n\n  if (isLoading) return <LoadingIcon />;\n\n  return (\n    <div className=\"list-group\">\n      {posts.map((post) => {\n        const date = new Date(post.createdDate);\n        const formattedDate = `${date.getDate()}/${date.getMonth()}/${date.getFullYear()}`;\n        return (\n          <Link\n            key={post._id}\n            to={`/post/${post._id}`}\n            className=\"list-group-item list-group-item-action\"\n          >\n            <img alt=\"\" className=\"avatar-tiny\" src={post.author.avatar} />{\" \"}\n            <strong>{post.title}</strong>\n            <span className=\"text-muted small\"> on {formattedDate} </span>\n          </Link>\n        );\n      })}\n    </div>\n  );\n}\n\nexport default ProfilePosts;\n","import React, { useEffect, useState } from \"react\";\nimport Axios from \"axios\";\nimport { useParams, Link } from \"react-router-dom\";\n\nimport LoadingIcon from \"./LoadingIcon\";\n\nfunction ProfileFollowers() {\n  const [isLoading, setIsLoading] = useState(true);\n  const [posts, setPosts] = useState([]);\n\n  const { username } = useParams();\n\n  useEffect(() => {\n    const request = Axios.CancelToken.source();\n\n    const fetchedPosts = async function () {\n      try {\n        const response = await Axios.get(`/profile/${username}/followers`, {\n          cancelToken: request.token,\n        });\n        setPosts(response.data);\n        setIsLoading(false);\n      } catch (e) {\n        console.log(\"catched an error in profile posts\");\n      }\n    };\n    fetchedPosts();\n\n    return () => {\n      request.cancel();\n    };\n  }, [username]);\n\n  if (isLoading) return <LoadingIcon />;\n\n  return (\n    <div className=\"list-group\">\n      {posts.map((follower, index) => {\n        return (\n          <Link\n            key={index}\n            to={`/profile/${follower.username}`}\n            className=\"list-group-item list-group-item-action\"\n          >\n            <img alt=\"\" className=\"avatar-tiny\" src={follower.avatar} />{\" \"} {follower.username}\n            \n          </Link>\n        );\n      })}\n    </div>\n  );\n}\n\nexport default ProfileFollowers;\n","import React, { useEffect, useState } from \"react\";\nimport Axios from \"axios\";\nimport { useParams, Link } from \"react-router-dom\";\n\nimport LoadingIcon from \"./LoadingIcon\";\n\nfunction ProfileFollowing() {\n  const [isLoading, setIsLoading] = useState(true);\n  const [posts, setPosts] = useState([]);\n\n  const { username } = useParams();\n\n  useEffect(() => {\n    const request = Axios.CancelToken.source();\n\n    const fetchedPosts = async function () {\n      try {\n        const response = await Axios.get(`/profile/${username}/following`, {\n          cancelToken: request.token,\n        });\n        setPosts(response.data);\n        setIsLoading(false);\n      } catch (e) {\n        console.log(\"catched an error in profile posts\");\n      }\n    };\n    fetchedPosts();\n\n    return () => {\n      request.cancel();\n    };\n  }, [username]);\n\n  if (isLoading) return <LoadingIcon />;\n\n  return (\n    <div className=\"list-group\">\n      {posts.map((follower, index) => {\n        return (\n          <Link\n            key={index}\n            to={`/profile/${follower.username}`}\n            className=\"list-group-item list-group-item-action\"\n          >\n            <img alt=\"\" className=\"avatar-tiny\" src={follower.avatar} />{\" \"} {follower.username}\n            \n          </Link>\n        );\n      })}\n    </div>\n  );\n}\n\nexport default ProfileFollowing;\n","import React, { useEffect, useContext } from \"react\";\nimport Page from \"./Page\";\nimport { useParams, NavLink, Switch, Route } from \"react-router-dom\";\nimport Axios from \"axios\";\nimport StateContext from \"../StateContext\";\nimport { useImmer } from \"use-immer\";\n\nimport ProfilePosts from \"./ProfilePosts\";\nimport ProfileFollowers from \"./ProfileFollowers\";\nimport ProfileFollowing from \"./ProfileFollowing\";\n\n\n//Main function for component\nfunction Profile() {\n  const { username } = useParams();\n  const appState = useContext(StateContext);\n  const [state, setState] = useImmer({\n    followActionLoading: false,\n    startFollowingRequestCount: 0,\n    stopFollowingRequestCount: 0,\n    profileData: {\n      profileUsername: \"...\",\n      profileAvatar: \"https://gravatar.com/avatar/placeholder?s=128\",\n      isFollowing: false,\n      counts: { postCount: \"\", followerCount: \"\", followingCount: \"\" },\n    },\n  });\n\n  //Primary useEffect - This is used when the component mounts\n  useEffect(() => {\n    const ourRequest = Axios.CancelToken.source();\n\n    async function fetchData() {\n      try {\n        const response = await Axios.post(\n          `/profile/${username}`,\n          { token: appState.user.token },\n          { cancelToken: ourRequest.token }\n        );\n        setState((draft) => {\n          draft.profileData = response.data;\n        });\n      } catch (e) {\n        console.log(e.response.data);\n      }\n    }\n    fetchData();\n    return () => {\n      ourRequest.cancel();\n    };\n  }, [username]);\n\n  //Start following\n  function startFollowing() {\n    setState((draft) => {\n      draft.startFollowingRequestCount++;\n    });\n  }\n\n  useEffect(() => {\n    if (state.startFollowingRequestCount) {\n      setState((draft) => {\n        draft.followActionLoading = true;\n      });\n\n      const ourRequest = Axios.CancelToken.source();\n\n      async function fetchData() {\n        try {\n          const response = await Axios.post(\n            `/addFollow/${state.profileData.profileUsername}`,\n            { token: appState.user.token },\n            { cancelToken: ourRequest.token }\n          );\n\n          setState((draft) => {\n            draft.profileData.isFollowing = true;\n            draft.profileData.counts.followerCount++;\n            draft.followActionLoading = false;\n            draft.startFollowingRequestCount = 0;\n          });\n        } catch (e) {\n          console.log(e.response.data);\n        }\n      }\n      fetchData();\n      return () => {\n        ourRequest.cancel();\n      };\n    }\n  }, [state.startFollowingRequestCount]);\n\n  //Stop following\n  function stopFollowing() {\n    setState((draft) => {\n      draft.stopFollowingRequestCount++;\n    });\n  }\n\n  useEffect(() => {\n    if (state.stopFollowingRequestCount) {\n      setState((draft) => {\n        draft.followActionLoading = true;\n      });\n\n      const ourRequest = Axios.CancelToken.source();\n\n      async function fetchData() {\n        try {\n          const response = await Axios.post(\n            `/removeFollow/${state.profileData.profileUsername}`,\n            { token: appState.user.token },\n            { cancelToken: ourRequest.token }\n          );\n\n          setState((draft) => {\n            draft.profileData.isFollowing = false;\n            draft.profileData.counts.followerCount--;\n            draft.followActionLoading = false;\n            draft.stopFollowingRequestCount = 0;\n          });\n        } catch (e) {\n          console.log(e.response.data);\n        }\n      }\n\n      fetchData();\n      return () => {\n        ourRequest.cancel();\n      };\n    }\n  }, [state.stopFollowingRequestCount]);\n\n  return (\n    <Page title=\"Profile screen\">\n      <h2>\n        <img className=\"avatar-small\" src={state.profileData.profileAvatar} />{\" \"}\n        {state.profileData.profileUsername}\n        {appState.loggedIn &&\n          !state.profileData.isFollowing &&\n          appState.user.username != state.profileData.profileUsername &&\n          state.profileData.profileUsername != \"...\" && (\n            <button\n              onClick={startFollowing}\n              disabled={state.followActionLoading}\n              className=\"btn btn-primary btn-sm ml-2\"\n            >\n              Follow <i className=\"fas fa-user-plus\"></i>\n            </button>\n          )}\n        {appState.loggedIn &&\n          state.profileData.isFollowing &&\n          appState.user.username != state.profileData.profileUsername &&\n          state.profileData.profileUsername != \"...\" && (\n            <button\n              onClick={stopFollowing}\n              disabled={state.followActionLoading}\n              className=\"btn btn-danger btn-sm ml-2\"\n            >\n              Stop Following <i className=\"fas fa-user-times\"></i>\n            </button>\n          )}\n      </h2>\n\n      <div className=\"profile-nav nav nav-tabs pt-2 mb-4\">\n        <NavLink\n          exact\n          to={`/profile/${state.profileData.profileUsername}`}\n          className=\"nav-item nav-link\"\n        >\n          Posts: {state.profileData.counts.postCount}\n        </NavLink>\n        <NavLink\n          to={`/profile/${state.profileData.profileUsername}/followers`}\n          className=\"nav-item nav-link\"\n        >\n          Followers: {state.profileData.counts.followerCount}\n        </NavLink>\n        <NavLink\n          to={`/profile/${state.profileData.profileUsername}/following`}\n          className=\"nav-item nav-link\"\n        >\n          Following: {state.profileData.counts.followingCount}\n        </NavLink>\n      </div>\n\n      <Switch>\n        <Route exact path=\"/profile/:username\">\n          <ProfilePosts />\n        </Route>\n        <Route path=\"/profile/:username/followers\">\n          <ProfileFollowers />\n        </Route>\n        <Route path=\"/profile/:username/following\">\n          <ProfileFollowing />\n        </Route>\n      </Switch>\n    </Page>\n  );\n}\n\nexport default Profile;\n","import React, { useContext, useEffect, useRef } from \"react\";\nimport { useImmer } from \"use-immer\";\nimport io from \"socket.io-client\";\nimport { Link } from \"react-router-dom\";\n\nimport StateContext from \"../StateContext\";\nimport DispatchContext from \"../DispatchContext\";\n\nconst socket = io(\n  process.env.BACKENDURL || \"https://mohammed-social-media.herokuapp.com\"\n);\n\nfunction Chat() {\n  const appState = useContext(StateContext);\n  const appDispatch = useContext(DispatchContext);\n\n  const [state, setState] = useImmer({\n    fieldValue: \"\",\n    chatMessages: [],\n  });\n\n  const chatField = useRef(null);\n  const chatLog = useRef(null);\n\n  useEffect(() => {\n    if (appState.isChatOpen) {\n      chatField.current.focus();\n      appDispatch({ type: \"clearUnreadChatCount\" });\n    }\n  }, [appState.isChatOpen]);\n\n  useEffect(() => {\n    socket.on(\"chatFromServer\", (message) => {\n      setState((draft) => {\n        draft.chatMessages.push(message);\n      });\n    });\n  }, []);\n\n  useEffect(() => {\n    chatLog.current.scrollTop = chatLog.current.scrollHeight;\n    if (state.chatMessages.length && !appState.isChatOpen) {\n      appDispatch({ type: \"incrementChatCount\" });\n    }\n  }, [state.chatMessages]);\n\n  const handleField = function (e) {\n    const value = e.target.value;\n    setState((draft) => {\n      draft.fieldValue = value;\n    });\n  };\n\n  const handleSubmit = function (e) {\n    e.preventDefault();\n\n    socket.emit(\"chatFromBrowser\", {\n      message: state.fieldValue,\n      token: appState.user.token,\n    });\n\n    setState((draft) => {\n      draft.chatMessages.push({\n        message: draft.fieldValue,\n        username: appState.user.username,\n        avatar: appState.user.avatar,\n      });\n      draft.fieldValue = \"\";\n    });\n  };\n\n  return (\n    <div\n      id=\"chat-wrapper\"\n      className={`chat-wrapper ${\n        appState.isChatOpen && \"chat-wrapper--is-visible\"\n      } shadow border-top border-left border-right`}\n    >\n      <div className=\"chat-title-bar bg-primary\">\n        Chat\n        <span\n          onClick={() => appDispatch({ type: \"closeChat\" })}\n          className=\"chat-title-bar-close\"\n        >\n          <i className=\"fas fa-times-circle\"></i>\n        </span>\n      </div>\n      <div ref={chatLog} id=\"chat\" className=\"chat-log\">\n        {state.chatMessages.map((message, index) => {\n          if (message.username === appState.user.username) {\n            return (\n              <div key={index} className=\"chat-self\">\n                <div className=\"chat-message\">\n                  <div className=\"chat-message-inner\">{message.message}</div>\n                </div>\n                <img\n                  alt=\"\"\n                  className=\"chat-avatar avatar-tiny\"\n                  src={message.avatar}\n                />\n              </div>\n            );\n          } else {\n            return (\n              <div key={index} className=\"chat-other\">\n                <Link to={`/profile/${message.username}`}>\n                  <img alt=\"\" className=\"avatar-tiny\" src={message.avatar} />\n                </Link>\n                <div className=\"chat-message\">\n                  <div className=\"chat-message-inner\">\n                    <Link to={`/profile/${message.username}`}>\n                      <strong>{message.username}: </strong>\n                    </Link>\n\n                    {message.message}\n                  </div>\n                </div>\n              </div>\n            );\n          }\n        })}\n      </div>\n      <form\n        onSubmit={handleSubmit}\n        id=\"chatForm\"\n        className=\"chat-form border-top\"\n      >\n        <input\n          ref={chatField}\n          type=\"text\"\n          className=\"chat-field\"\n          id=\"chatField\"\n          placeholder=\"Type a message…\"\n          autoComplete=\"off\"\n          value={state.fieldValue}\n          onChange={handleField}\n        />\n      </form>\n    </div>\n  );\n}\n\nexport default Chat;\n","import React, { useEffect, useRef, Suspense } from \"react\";\nimport { BrowserRouter, Switch, Route } from \"react-router-dom\";\nimport { useImmerReducer } from \"use-immer\";\nimport \"./App.css\";\nimport Axios from \"axios\";\nimport { CSSTransition } from \"react-transition-group\";\n\nimport StateContext from \"./StateContext\";\nimport DispatchContext from \"./DispatchContext\";\n\nimport FlashMessages from \"./components/FlashMessages\";\nimport Header from \"./components/Header\";\nimport Footer from \"./components/Footer\";\nimport Search from \"./components/Search\";\nimport HomeGuest from \"./components/HomeGuest\";\nimport Home from \"./components/Home\";\nimport About from \"./components/About\";\nimport Terms from \"./components/Terms\";\nimport SinglePost from \"./components/SinglePost\";\nimport EditPost from \"./components/EditPost\";\nimport Profile from \"./components/Profile\";\nimport Chat from \"./components/Chat\";\nimport LoadingIcon from \"./components/LoadingIcon\";\nconst CreatePost = React.lazy(() => import(\"./components/CreatePost\"));\nconst NotFound = React.lazy(() => import(\"./components/NotFound\"));\n\nAxios.defaults.baseURL =\n  process.env.BACKENDURL || \"https://mohammed-social-media.herokuapp.com\";\n\nfunction App() {\n  const intialStates = {\n    loggedIn: Boolean(localStorage.getItem(\"userToken\")),\n    flashMessagesArray: [],\n    isSearchOpen: false,\n    isChatOpen: false,\n    unreadChatCount: 0,\n    user: {\n      username: localStorage.getItem(\"username\"),\n      token: localStorage.getItem(\"userToken\"),\n      avatar: localStorage.getItem(\"userAvatar\"),\n    },\n  };\n\n  const reducer = function (draft, action) {\n    switch (action.type) {\n      case \"login\":\n        draft.loggedIn = true;\n        draft.user = action.data;\n        break;\n      case \"logout\":\n        draft.loggedIn = false;\n        break;\n      case \"flashMessage\":\n        draft.flashMessagesArray.push(action.message);\n        break;\n      case \"openSearch\":\n        draft.isSearchOpen = true;\n        break;\n      case \"closeSearch\":\n        draft.isSearchOpen = false;\n        break;\n      case \"toggleChat\":\n        draft.isChatOpen = !draft.isChatOpen;\n        break;\n      case \"closeChat\":\n        draft.isChatOpen = false;\n        break;\n      case \"incrementChatCount\":\n        draft.unreadChatCount++;\n        break;\n      case \"clearUnreadChatCount\":\n        draft.unreadChatCount = 0;\n        break;\n      default:\n        return draft;\n    }\n  };\n\n  const [state, dispatch] = useImmerReducer(reducer, intialStates);\n  const nodeRef = useRef(null);\n\n  useEffect(() => {\n    if (state.loggedIn) {\n      localStorage.setItem(\"userToken\", state.user.token);\n      localStorage.setItem(\"userAvatar\", state.user.avatar);\n      localStorage.setItem(\"username\", state.user.username);\n    } else {\n      localStorage.removeItem(\"userToken\");\n      localStorage.removeItem(\"userAvatar\");\n      localStorage.removeItem(\"username\");\n    }\n  }, [\n    state.loggedIn,\n    state.user.avatar,\n    state.user.token,\n    state.user.username,\n  ]);\n\n  useEffect(() => {\n    if (state.loggedIn) {\n      const request = Axios.CancelToken.source();\n      const fetchResults = async () => {\n        try {\n          const res = await Axios.post(\n            \"/checkToken\",\n            { token: state.user.token },\n            { cancelToken: request.token }\n          );\n          if (!res.data) {\n            dispatch({ type: \"logout\" });\n            dispatch({\n              type: \"flashMessage\",\n              message: {\n                type: \"danger\",\n                text: \"Your session has expired, login again.\",\n              },\n            });\n          }\n        } catch (e) {\n          console.log(\"Catched an error at search file\");\n        }\n      };\n      fetchResults();\n    }\n  }, []);\n\n  return (\n    <div className=\"App\">\n      <StateContext.Provider value={state}>\n        <DispatchContext.Provider value={dispatch}>\n          <BrowserRouter>\n            <FlashMessages />\n            <Header />\n            <Suspense fallback={<LoadingIcon />}>\n              <Switch>\n                <Route path=\"/\" exact>\n                  {state.loggedIn ? <Home /> : <HomeGuest />}\n                </Route>\n                <Route path=\"/about-us\" exact>\n                  <About />\n                </Route>\n                <Route path=\"/terms\" exact>\n                  <Terms />\n                </Route>\n                <Route path=\"/create-post\" exact>\n                  <CreatePost />\n                </Route>\n                <Route path=\"/post/:id\" exact>\n                  <SinglePost />\n                </Route>\n                <Route path=\"/post/:id/edit\" exact>\n                  <EditPost />\n                </Route>\n                <Route path=\"/profile/:username\" exact>\n                  <Profile />\n                </Route>\n                <Route path=\"/profile/:username/followers\" exact>\n                  <Profile />\n                </Route>\n                <Route path=\"/profile/:username/following\" exact>\n                  <Profile />\n                </Route>\n                <Route>\n                  <NotFound />\n                </Route>\n              </Switch>\n            </Suspense>\n            <CSSTransition\n              timeout={330}\n              in={state.isSearchOpen}\n              nodeRef={nodeRef}\n              classNames=\"search-overlay\"\n              unmountOnExit\n            >\n              <Search nodeRef={nodeRef} />\n            </CSSTransition>\n            <Chat />\n            <Footer />\n          </BrowserRouter>\n        </DispatchContext.Provider>\n      </StateContext.Provider>\n    </div>\n  );\n}\n\nexport default App;\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\n\nimport \"./index.css\";\nimport App from \"./App\";\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById(\"root\")\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\n","import React from \"react\";\nimport { Link } from \"react-router-dom\";\nimport Page from \"./Page\";\n\nfunction NotFound() {\n  return (\n    <Page title=\"Not Found\">\n      <div className=\"text-center\">\n        <h2>Whoops, we can not find this page</h2>\n        <p className=\"lead text-muted\">\n          Go to the <Link to=\"/\">homepage</Link> to get a fresh start.\n        </p>\n      </div>\n    </Page>\n  );\n}\n\nexport default NotFound;\n"],"sourceRoot":""}